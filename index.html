<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cancionero Lit칰rgico Pro</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#121212;
    color:white;
    margin:0;
    padding:15px;
}

h1,h2{ text-align:center; }

.controls{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    justify-content:center;
    margin-bottom:15px;
}

button{
    padding:8px 10px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
}

.transpose{ background:#ff9800; color:black;}
.toggle{ background:#03a9f4; color:black;}
.filtro{ background:#333; color:white;}

input{
    padding:8px;
    border-radius:6px;
    border:none;
}

.canto{
    background:#1e1e1e;
    padding:15px;
    border-radius:10px;
    margin-top:15px;
}

audio{ width:100%; margin-top:10px; }

.letra{
    line-height:2.6em;
    font-size:18px;
    margin-top:15px;
}

.linea{ margin-bottom:10px; }

.acorde-palabra{
    position:relative;
    display:inline-block;
    margin: 0;
    padding: 0;
}

.acorde{
    position:absolute;
    top:-1.2em;
    left:0;
    font-size:0.75em;
    color:#4caf50;
    font-weight:bold;
}

.misa-box{
    background:#1e1e1e;
    padding:15px;
    border-radius:10px;
    margin-bottom:20px;
}

select{
    padding:6px;
    border-radius:6px;
    margin:5px 0;
}

@media(max-width:600px){
    .letra{ font-size:20px;}
}

.filtros {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 20px;
}

.filtros button {
    padding: 8px 12px;
    margin: 4px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: #e0e0e0;
    }

.filtros button:hover{
    background: #cfcfcf;
    }

</style>
</head>

<body>

<h1>游꿧 Cancionero Lit칰rgico</h1>

<!-- CONTROLES -->
<div class="controls">
    <input type="text" id="buscar" placeholder="Buscar canto...">
    <button class="transpose" onclick="transponer(-1)">-1</button>
    <button class="transpose" onclick="transponer(1)">+1</button>
    <button class="toggle" onclick="toggleAcordes()">Acordes</button>
</div>

<!-- FILTROS -->

<div class="filtros">
  <button onclick="filtrar('todos')">Todos</button>
  <button onclick="filtrar('entrada')">Entrada</button>
  <button onclick="filtrar('piedad')">Piedad</button>
  <button onclick="filtrar('gloria')">Gloria</button>
  <button onclick="filtrar('aleluya')">Aleluya</button>
  <button onclick="filtrar('ofertorio')">Ofertorio</button>
  <button onclick="filtrar('cordero')">Cordero</button>
  <button onclick="filtrar('comunion')">Comuni칩n</button>
  <button onclick="filtrar('salida')">Salida</button>
  <button onclick="filtrar('hora santa')">HoraSanta</button>
</div>


<!-- ================= MISA DEL DOMINGO ================= -->

<div class="misa-box">
<h2>游늰 Crear Misa del Domingo</h2>

<label>Entrada:</label><br>
<select onchange="seleccionarMisa('entrada', this.value)">
<option value="">-- Seleccionar --</option>
</select><br>

<label>Piedad:</label><br>
<select onchange="seleccionarMisa('piedad', this.value)">
<option value="">-- Seleccionar --</option>
</select><br>

<label>Gloria:</label><br>
<select onchange="seleccionarMisa('gloria', this.value)">
<option value="">-- Seleccionar --</option>
</select><br>

<label>Aleluya:</label><br>
<select onchange="seleccionarMisa('aleluya', this.value)">
<option value="">-- Seleccionar --</option>
</select><br>

<label>Ofertorio:</label><br>
<select onchange="seleccionarMisa('ofertorio', this.value)">
<option value="">-- Seleccionar --</option>
</select><br>

<label>Cordero:</label><br>
<select onchange="seleccionarMisa('cordero', this.value)">
<option value="">-- Seleccionar --</option>
</select><br>

<label>Comunion:</label><br>
<select onchange="seleccionarMisa('comunion', this.value)">
<option value="">-- Seleccionar --</option>
</select><br>

<label>Salida:</label><br>
<select onchange="seleccionarMisa('salida', this.value)">
<option value="">-- Seleccionar --</option>
</select>

</div>

<!-- ================= CANCIONES ================= -->


<div id="canciones">

<div class="canto" data-grupo="entrada" data-id="entrada1" data-titulo="canto de entrada">
<h3>Entrada - Canto de Entrada</h3>
<div class="letra">
<div class="linea">
<span class="acorde-palabra"><span class="acorde">C</span>Ven</span> Se침or
</div>
</div>
</div>

<div class="canto" data-grupo="piedad" data-id="piedad1_E" data-titulo="piedad1_E">
<h3>Piedad - Piedad1_E</h3>

<audio controls>
    <source src="Piedad1_E.mp3" type="audio/mp3">
</audio>

<div class="letra">

<div class="linea">
<span class="acorde-palabra"><span class="acorde">E</span>Se침or</span>
<span class="acorde-palabra"><span class="acorde">S7</span>Se침or</span>
<span class="acorde-palabra"><span class="acorde">A</span>ten</span>
<span class="acorde-palabra"><span class="acorde">E</span>Piedad</span> <strong>(2x)</strong>
</div>

<div class="linea">
<span class="acorde-palabra"><span class="acorde">E</span>Cri</span>-
<span class="acorde-palabra"><span class="acorde">S7</span>sto</span>
<span class="acorde-palabra"><span class="acorde">A</span>ten</span>
<span class="acorde-palabra"><span class="acorde">E</span>Piedad</span> <strong>(2x)</strong>

</div>

<div class="linea">
<span class="acorde-palabra"><span class="acorde">E</span>Se침or</span>... <strong>(2x)</strong>

</div>
</div>
</div>


<div class="canto" data-grupo="piedad" data-id="piedad2_Em" data-titulo="piedad2_Em">
<h3>Piedad - piedad2_Em</h3>

<audio controls>
    <source src="C:\Users\jcarl\OneDrive\Documents\Cantos\cancionero\audios\Piedad1_E.mp4" type="audio/mp4">
</audio>

<div class="letra">

<div class="linea">
<span class="acorde-palabra"><span class="acorde">Em</span>Se침or</span>
ten pie<span class="acorde-palabra"><span class="acorde">Am</span>dad</span>
<span class="acorde-palabra"><span class="acorde">Em</span>ten</span>
<span class="acorde-palabra"><span class="acorde">S7</span>pie</span><span class="acorde-palabra"><span class="acorde">Em</span>dad</span> <strong>(2x)</strong>
</div>

<div class="linea">
<span class="acorde-palabra"><span class="acorde">G</span>Cristo</span>
ten pie<span class="acorde-palabra"><span class="acorde">Am</span>dad</span>
<span class="acorde-palabra"><span class="acorde">Em</span>ten</span>
<span class="acorde-palabra"><span class="acorde">S7</span>pie</span><span class="acorde-palabra"><span class="acorde">Em</span>dad</span> <strong>(2x)</strong>

</div>

<div class="linea">
<span class="acorde-palabra"><span class="acorde">Em</span>Se침or</span>... <strong>(2x)</strong>

</div>
</div>
</div>


<div class="canto" data-grupo="piedad" data-id="piedad3_Am" data-titulo="piedad3_Am">
<h3>Piedad - piedad2_Em</h3>

<audio controls>
    <source src="C:\Users\jcarl\OneDrive\Documents\Cantos\cancionero\audios\Piedad1_E.mp4" type="audio/mp4">
</audio>

<div class="letra">

<div class="linea">
<span class="acorde-palabra"><span class="acorde">Am</span>Se침or</span>
ten pie<span class="acorde-palabra"><span class="acorde">A7</span>dad</span>
<span class="acorde-palabra"><span class="acorde">Dm</span>ten</span> piedad
<span class="acorde-palabra"><span class="acorde">G7</span>Se침or</span> ten pie<span class="acorde-palabra"><span class="acorde">C</span>da-</span><span class="acorde-palabra"><span class="acorde">E7</span>ad</span> <strong>(2x)</strong>
</div>

<div class="linea">
<span class="acorde-palabra"><span class="acorde">Am</span>Cristo</span>
ten piedad <span class="acorde-palabra"><span class="acorde">G</span>ten</span> piedad
<span class="acorde-palabra"><span class="acorde">F</span>Cristo</span>
ten pie<span class="acorde-palabra"><span class="acorde">E7</span>dad</span> <strong>(2x)</strong>
</div>

<div class="linea">
<span class="acorde-palabra"><span class="acorde">Am</span>Se침or</span>... <strong>(2x)</strong>

</div>
</div>
</div>


<div class="canto" data-grupo="gloria" data-id="gloria1" data-titulo="gloria renovacion">
<h3>Gloria - Renovacion</h3>
<div class="letra">
<div class="linea">
<span class="acorde-palabra"><span class="acorde">G</span>Gloria</span> Gloria
</div>
</div>
</div>

<div class="canto" data-grupo="aleluya" data-id="aleluya1" data-titulo="aleluya">
<h3>Aleluya</h3>
<div class="letra">
<div class="linea">
<span class="acorde-palabra"><span class="acorde">D</span>Aleluya</span>
</div>
</div>
</div>

<div class="canto" data-grupo="salida" data-id="salida1" data-titulo="canto final">
<h3>Salida - Canto Final</h3>
<div class="letra">
<div class="linea">
<span class="acorde-palabra"><span class="acorde">A</span>Vamos</span> a cantar
</div>
</div>
</div>

</div>

<script>

// ===== BUSCADOR =====
document.getElementById("buscar").addEventListener("input", function(){
    let filtro=this.value.toLowerCase();
    document.querySelectorAll(".canto").forEach(c=>{
        let titulo=c.dataset.titulo;
        c.style.display=titulo.includes(filtro)?"block":"none";
    });
});

// ===== TRANSPOSICI칍N =====
const notas=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];
const equivalentes={"Db":"C#","Eb":"D#","Gb":"F#","Ab":"G#","Bb":"A#"};

function normalizar(a){ return equivalentes[a]||a; }

function transponer(pasos){
    document.querySelectorAll(".acorde").forEach(el=>{
        let t=el.innerText;
        let m=t.match(/^([A-G][b#]?)(.*)$/);
        if(!m)return;
        let base=normalizar(m[1]);
        let resto=m[2];
        let i=notas.indexOf(base);
        if(i===-1)return;
        el.innerText=notas[(i+pasos+12)%12]+resto;
    });
}

// ===== MOSTRAR/OCULTAR =====
let visibles=true;
function toggleAcordes(){
    visibles=!visibles;
    document.querySelectorAll(".acorde").forEach(a=>{
        a.style.display=visibles?"block":"none";
    });
}

// ===== CREAR MISA =====

// llenar selects autom치ticamente
document.querySelectorAll(".canto").forEach(c=>{
    let grupo=c.dataset.grupo;
    let id=c.dataset.id;
    let titulo=c.querySelector("h3").innerText;

    let select=document.querySelector(`select[onchange*="${grupo}"]`);
    if(select){
        let option=document.createElement("option");
        option.value=id;
        option.textContent=titulo;
        select.appendChild(option);
    }
});

// mostrar solo seleccionados
function seleccionarMisa(grupo,id){
    document.querySelectorAll(`.canto[data-grupo="${grupo}"]`)
    .forEach(c=>{
        c.style.display=(c.dataset.id===id)?"block":"none";
    });
}

</script>

<script>
function filtrar(grupo) {
  const cantos = document.querySelectorAll('.canto');

  cantos.forEach(canto => {
    if (grupo === 'todos') {
      canto.style.display = 'block';
    } else {
      if (canto.dataset.grupo === grupo) {
        canto.style.display = 'block';
      } else {
        canto.style.display = 'none';
      }
    }
  });
}
</script>


</body>

</html>

